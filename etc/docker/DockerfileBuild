FROM haxe:3.3.0-rc.1
MAINTAINER Dion Amago Whitehead

CMD ["/bin/bash"]

ENV APP /app
RUN mkdir -p $APP
WORKDIR $APP

RUN haxelib newrepo

#Only install haxe packages if the package.json changes
ADD ./etc/hxml/base.hxml $APP/etc/hxml/base.hxml
ADD ./etc/hxml/base-nodejs.hxml $APP/etc/hxml/base-nodejs.hxml
RUN haxelib install --always etc/hxml/base.hxml && haxelib install --always etc/hxml/base-nodejs.hxml
